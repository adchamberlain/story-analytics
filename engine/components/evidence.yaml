# Evidence component reference
# Defines valid components and their props for the LLM

framework: evidence
version: "40.x"

components:
  LineChart:
    description: "Line chart for time series data"
    required_props:
      - data: "Query name reference, e.g., {query_name}"
      - x: "Column name for x-axis"
      - y: "Column name(s) for y-axis"
    optional_props:
      - title: "Chart title"
      - subtitle: "Chart subtitle"
    notes:
      - "Single series: y=\"column_name\""
      - "Multiple series: y={[\"column1\", \"column2\"]} (array syntax)"
      - "NEVER use y2, y3, etc. - these props DO NOT EXIST"
    example: |
      <LineChart
        data={query_name}
        x="month"
        y={["sales_2024", "sales_2025"]}
        title="Sales Comparison"
      />

  BarChart:
    description: "Bar chart for categorical comparisons"
    required_props:
      - data: "Query name reference"
      - x: "Column name for x-axis (categories)"
      - y: "Column name for y-axis (values)"
    optional_props:
      - title: "Chart title"
      - subtitle: "Chart subtitle"
    example: |
      <BarChart
        data={query_name}
        x="category"
        y="count"
        title="Count by Category"
      />

  AreaChart:
    description: "Area chart for cumulative data"
    required_props:
      - data: "Query name reference"
      - x: "Column name for x-axis"
      - y: "Column name(s) for y-axis"
    optional_props:
      - title: "Chart title"
    notes:
      - "Same y syntax as LineChart"

  DataTable:
    description: "Interactive data table"
    required_props:
      - data: "Query name reference"
    optional_props:
      - title: "Table title"
    example: |
      <DataTable data={query_name} />

  BigValue:
    description: "Large KPI/metric display"
    required_props:
      - data: "Query name reference"
      - value: "Column name for the value to display"
    optional_props:
      - title: "Label for the metric"
      - fmt: "Format keyword (NOT a format string!)"
    notes:
      - "ALWAYS use fmt prop for proper formatting"
      - "fmt MUST be one of these EXACT keywords (no quotes needed in value):"
      - "  - usd0 = currency, no decimals ($1,234)"
      - "  - usd = currency with decimals ($1,234.56)"
      - "  - num0 = number, no decimals (1,234)"
      - "  - num2 = number, 2 decimals (1,234.56)"
      - "  - pct0 = percentage, no decimals (12%)"
      - "  - pct1 = percentage, 1 decimal (12.3%)"
      - "WRONG: fmt=\"$,.0f\" fmt=\"${:,.0f}\" - these will show 'f' in output!"
      - "RIGHT: fmt=\"usd0\" - this is a keyword, not a format string"
    example: |
      <BigValue data={query_name} value="total_revenue" title="Total Revenue" fmt="usd0" />

  Dropdown:
    description: "Filter dropdown"
    required_props:
      - name: "Unique filter name"
      - data: "Query name reference"
      - value: "Column name for dropdown values"
    optional_props:
      - title: "Dropdown label"
      - defaultValue: "Default selected value"
    example: |
      <Dropdown name="region_filter" data={regions} value="region_name" title="Select Region" />

# Common mistakes to avoid
common_mistakes:
  - mistake: "Using y2, y3 for multiple series"
    correct: "Use y={[\"col1\", \"col2\"]} array syntax"
  - mistake: "Missing curly braces around data reference"
    correct: "Always use data={query_name}, not data=\"query_name\""
  - mistake: "Using Python/C format strings like '${:,.0f}', '{:.2f}', '$,.0f', etc."
    correct: "NEVER use format strings with 'f' suffix. Use Evidence fmt prop: fmt=\"usd0\" for currency, fmt=\"num2\" for numbers"
  - mistake: "Numbers showing as '$,1290507.0f' with 'f' at the end"
    correct: "This happens when using wrong format strings. Use fmt=\"usd0\" NOT fmt=\"$,.0f\""
  - mistake: "Setting fmt to a Python-style format string"
    correct: "Evidence fmt values are simple keywords: usd, usd0, usd2, num0, num2, pct, pct1, pct2 - NOT format codes"
