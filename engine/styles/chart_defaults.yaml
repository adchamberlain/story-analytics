# Story Analytics Chart Design System
# Apply these defaults when generating Evidence charts with echartsOptions

colors:
  # Primary data colors (indigo spectrum) - use for all data series
  data:
    primary: "#6366f1"      # Main brand indigo
    dark: "#3730a3"         # Darkest, high contrast
    medium: "#818cf8"       # Medium shade
    light: "#a5b4fc"        # Light shade

  # Multi-series palette (ordered dark to light)
  series_palette:
    - "#3730a3"
    - "#6366f1"
    - "#a5b4fc"

  # Extended palette for 5+ series
  series_palette_extended:
    - "#312e81"
    - "#3730a3"
    - "#4f46e5"
    - "#6366f1"
    - "#818cf8"
    - "#a5b4fc"
    - "#c7d2fe"

  # Annotation colors (amber) - ONLY for callouts, highlights, targets
  annotation:
    primary: "#f59e0b"
    dark: "#d97706"
    text: "#92400e"
    border: "rgba(245, 158, 11, 0.4)"
    fill: "rgba(245, 158, 11, 0.08)"
    label_bg: "rgba(255, 251, 235, 0.75)"

  # UI colors
  ui:
    grid_line: "#e0e7ff"
    axis_line: "#c7d2fe"
    axis_label_x: "#4b5563"
    axis_label_y: "#9ca3af"
    label_text: "#475569"
    shadow: "rgba(99, 102, 241, 0.25)"
    shadow_strong: "rgba(99, 102, 241, 0.4)"

typography:
  font_family: "Inter, sans-serif"
  axis_label_size: 12
  axis_label_size_small: 11
  data_label_size: 13
  title_weight: 600
  label_weight: 600

# Base options applied to ALL charts
base_echarts_options:
  grid:
    left: "2%"
    right: "3%"
    bottom: "10%"
    top: "18%"
    containLabel: true
  xAxis:
    axisLine:
      show: true
      lineStyle:
        color: "#c7d2fe"
        width: 1
    axisLabel:
      color: "#4b5563"
      fontSize: 12
      fontWeight: 500
      fontFamily: "Inter, sans-serif"
    axisTick:
      show: false
  yAxis:
    axisLine:
      show: false
    axisLabel:
      color: "#9ca3af"
      fontSize: 11
      fontFamily: "Inter, sans-serif"
    splitLine:
      lineStyle:
        color: "#e0e7ff"
        width: 1
        type: [4, 4]  # Dashed

# Chart-type-specific defaults
chart_types:
  line:
    smooth: 0.3
    lineStyle:
      width: 3
      color: "#6366f1"
      shadowColor: "rgba(99, 102, 241, 0.3)"
      shadowBlur: 8
      shadowOffsetY: 4
    itemStyle:
      color: "#6366f1"
      borderWidth: 3
      borderColor: "#fff"
      shadowColor: "rgba(99, 102, 241, 0.4)"
      shadowBlur: 6
    symbolSize: 10
    areaStyle:
      # Gradient fill from top to bottom
      color:
        type: "linear"
        x: 0
        y: 0
        x2: 0
        y2: 1
        colorStops:
          - offset: 0
            color: "rgba(99, 102, 241, 0.25)"
          - offset: 0.5
            color: "rgba(99, 102, 241, 0.08)"
          - offset: 1
            color: "rgba(99, 102, 241, 0.01)"
    emphasis:
      itemStyle:
        borderWidth: 4
        shadowBlur: 15
        shadowColor: "rgba(99, 102, 241, 0.5)"
      scale: 1.3

  bar_vertical:
    barWidth: "45%"
    itemStyle:
      borderRadius: [8, 8, 0, 0]  # Rounded top corners
      color: "#6366f1"
      shadowColor: "rgba(99, 102, 241, 0.25)"
      shadowBlur: 8
      shadowOffsetY: 4
    emphasis:
      itemStyle:
        shadowBlur: 15
        shadowColor: "rgba(99, 102, 241, 0.4)"

  bar_horizontal:
    barWidth: 48
    itemStyle:
      borderRadius: [0, 8, 8, 0]  # Rounded right corners
      color: "#6366f1"
      shadowColor: "rgba(99, 102, 241, 0.25)"
      shadowBlur: 8
      shadowOffsetX: 4
    label:
      show: true
      position: "right"
      color: "#475569"
      fontSize: 13
      fontWeight: 600
      fontFamily: "Inter, sans-serif"
      distance: 12
    emphasis:
      itemStyle:
        shadowBlur: 15
        shadowColor: "rgba(99, 102, 241, 0.4)"

  area:
    areaStyle:
      opacity: 0.8
    lineStyle:
      width: 2

  scatter:
    symbolSize: 10
    itemStyle:
      color: "#6366f1"
      opacity: 0.7

  histogram:
    itemStyle:
      color: "#6366f1"
      borderRadius: [4, 4, 0, 0]

  heatmap:
    visualMap:
      inRange:
        color:
          - "#e0e7ff"
          - "#c7d2fe"
          - "#a5b4fc"
          - "#818cf8"
          - "#6366f1"
          - "#4f46e5"
          - "#3730a3"
    itemStyle:
      borderColor: "#fff"
      borderWidth: 2
      borderRadius: 4

  funnel:
    gap: 4
    minSize: "20%"
    maxSize: "100%"
    label:
      show: true
      position: "inside"
      color: "#fff"
      fontSize: 12
      fontWeight: 600
    itemStyle:
      borderColor: "#fff"
      borderWidth: 2
    # Use extended palette for stages

  sankey:
    nodeAlign: "left"
    nodeGap: 12
    nodeWidth: 20
    label:
      color: "#1e293b"
      fontSize: 12
      fontWeight: 600
    lineStyle:
      color: "gradient"
      opacity: 0.4
    itemStyle:
      borderWidth: 0

# Annotation presets (amber color system)
annotations:
  # Range highlight (markArea)
  range_highlight:
    silent: true
    itemStyle:
      color: "rgba(245, 158, 11, 0.08)"
      borderColor: "rgba(245, 158, 11, 0.4)"
      borderWidth: 1
      borderType: "dashed"
    label:
      show: true
      position: "insideTop"
      color: "#b45309"
      fontSize: 13
      fontWeight: 600
      padding: [6, 10]

  # Reference line (markLine)
  reference_line:
    silent: true
    symbol: "none"
    lineStyle:
      color: "#f59e0b"
      width: 2
      type: "dashed"
    label:
      show: true
      position: "insideEndTop"
      color: "#92400e"
      fontSize: 13
      fontWeight: 600
      backgroundColor: "rgba(255, 251, 235, 0.75)"
      padding: [6, 10]
      borderRadius: 4

  # Point callout (markPoint)
  point_callout:
    symbol: "circle"
    symbolSize: 14
    itemStyle:
      color: "#fff"
      borderColor: "#f59e0b"
      borderWidth: 3
      shadowColor: "rgba(245, 158, 11, 0.4)"
      shadowBlur: 8
    label:
      show: true
      position: "top"
      distance: 14
      color: "#92400e"
      fontSize: 13
      fontWeight: 600
      backgroundColor: "rgba(255, 251, 235, 0.75)"
      padding: [8, 12]
      borderRadius: 6

# Legend styling
legend:
  show: true
  bottom: 0
  left: "center"
  itemGap: 40
  itemWidth: 28
  itemHeight: 4
  textStyle:
    color: "#4b5563"
    fontSize: 12
    fontFamily: "Inter, sans-serif"
    fontWeight: 500
    padding: [0, 0, 0, 8]

# Month formatter for time series (use in xAxis.axisLabel.formatter)
formatters:
  month_short: |
    function(value) {
      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
      const monthNum = parseInt(value.split('-')[1]) - 1;
      return months[monthNum];
    }
